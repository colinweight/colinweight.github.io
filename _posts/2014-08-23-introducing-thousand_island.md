---
layout: post
title: Introducing Thousand Island
subtitle: Dressing for Prawn
---
Thousand Island is a Ruby gem, dependent on [Prawn](https://github.com/prawnpdf/prawn), for getting repeatable PDF layouts and common styles up and running quickly.

For a detailed look, check out the project [Readme](https://github.com/colinweight/thousand_island), but here's an overview, along with some of the reasoning behind the project.

The first time I used Prawn and it's excellent manual [(download the pdf)](http://prawnpdf.org/manual.pdf), I was really impressed by it's flexibility and power. Then I wanted to set a repeating footer. [This blog post](http://kyleke.es/posts/2013/11/creating-a-repeating-footer-w-prawn/) by [Kyle Keesling](http://kyleke.es) was really helpful, but I figured it's a pretty common thing to want to do. Throw in a repeating header that has the company logo and some common text and you're starting to repeat the same tasks, either from one application to the next or even within the same application.

The application I was working on would benefit from a class that defined the common layouts (company logo at the top, url and page numbers at the bottom) so that any PDFs generated by the application would have a common style. This in itself isn't a big job, but I also knew of an upcoming project that would also require the same. Thousand Island was born.

The idea is that you subclass the standard `ThousandIsland::Template` class and take advantage of some magic methods as well as defining content methods that will be called later. All the layout (box sizes, font sizes, etc) is defined in a method that returns a Hash. You can override the defaults or add your own keys to tell Prawn what to do.

You then subclass the `ThousandIsland::Builder` class, tell it which Template you want to use, and then just deal with the business logic and content display.

There is also the option to create a `StyleSheet` module. By including `ThousandIsland::StyleSheet` in your stylesheet module, you get all the default styles. You can then override and add as you see fit. Each style magically creates a method for adding text to the PDF. For instance, the default `StyleSheet` has style info for h1\_style up to h6\_style. If in any method in your Template or Builder you say:
{% highlight ruby %}
  h1 'My Heading'
{% endhighlight %}
you will get your text rendered using the settings in the h1_style method. You can override the defaults either in your custom style sheet (if you're changing a lot) or in your `Template` (if you're only making a few changes). The best part is you can add your own, so a method such as:
{% highlight ruby %}
  def blogging_style
  body_style.merge({
    style: :bold,
    size: 12
  })
end
{% endhighlight %}
in either your `StyleSheet` or `Template` will automatically give you the ability to do the following:
{% highlight ruby %}
  blogging 'I am right and everyone else is wrong'
{% endhighlight %}
and have it styled according to the settings in your new style method. Cool. (I think so anyway)

It's incredibly likely that people will take issue with the defaults, although I know internet users are normally an easy going, un-opinionated bunch. Hey, I'm not even sure I like them yet. One compromise I'm yet to make my mind up on is the footer spacing. It was chosen so that an A4 document *should* print OK with US Letter setting. Easy to change if that doesn't suit your needs. 

For a quick look at a very simple sample PDF generated with the defaults the magic style methods, click [here](/assets/thousand_island_example.pdf).

There are a few more things that I would like to do. Making tables in Prawn is easy, but styling can be a bit convoluted, so adding functionality to make that easy too is on the plan, along with lists and a more flexible footer.

So, have a look at the project and see if it suits your purposes. Any other ideas or comments welcome.

